<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solvida Marketing Calendar</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&amp;display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-deep: #050507;
            --bg-panel: #0E0E12;
            --bg-sticky: #09090b;
            --border-subtle: rgba(255, 255, 255, 0.08);
            --border-active: rgba(255, 255, 255, 0.2);
            --border-edit: rgba(234, 179, 8, 0.5);
            --text-primary: #F2F2F2;
            --text-secondary: #9CA3AF;
            --text-tertiary: #6B7280;
            --brand-primary: #6366f1;
            --brand-glow: rgba(99, 102, 241, 0.5);
            --accent-green: #10b981;
            --accent-orange: #f97316;
            --grid-color: rgba(255, 255, 255, 0.05);
            --cat-product: #d946ef;
            --cat-social: #3b82f6;
            --cat-events: #f97316;
            --cat-uni: #10b981;
            --cat-influencer: #eab308;
            --cat-web: #22d3ee;
            --cat-culture: #ef4444;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body { 
            font-family: 'Montserrat', sans-serif; 
            background-color: var(--bg-deep); 
            color: var(--text-primary); 
            font-size: 14px; 
            line-height: 1.6;
            min-height: 100vh;
        }
        
        body::before { 
            content: ""; 
            position: fixed; 
            top: 0; left: 0; 
            width: 100%; height: 100%; 
            background-image: linear-gradient(var(--grid-color) 1px, transparent 1px), linear-gradient(90deg, var(--grid-color) 1px, transparent 1px); 
            background-size: 40px 40px; 
            z-index: -1; 
            pointer-events: none; 
        }
        
        .container { 
            width: 100%; 
            max-width: 1920px; 
            margin: 0 auto; 
            padding: 20px; 
        }

        /* Header */
        .header { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            margin-bottom: 25px; 
            padding: 15px 25px;
            background: var(--bg-panel);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
        }
        .brand { display: flex; align-items: center; gap: 15px; }
        .logo { font-size: 20px; font-weight: 800; color: var(--text-primary); display: flex; align-items: center; gap: 8px; }
        .logo-icon { color: var(--brand-primary); }
        .nav-tabs { display: flex; gap: 4px; background: rgba(255,255,255,0.03); padding: 3px; border-radius: 6px; }
        .nav-tab { 
            text-decoration: none; color: var(--text-secondary); 
            padding: 8px 16px; border-radius: 5px; 
            font-size: 11px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em;
            transition: all 0.2s;
        }
        .nav-tab:hover { background: rgba(255,255,255,0.05); color: var(--text-primary); }
        .nav-tab.active { background: var(--brand-primary); color: white; }
        .header-controls { display: flex; gap: 8px; align-items: center; }
        .btn { 
            background: var(--bg-panel); border: 1px solid var(--border-subtle); 
            color: var(--text-primary); padding: 8px 14px; border-radius: 6px; 
            cursor: pointer; font-size: 11px; font-weight: 600; 
            font-family: 'Montserrat', sans-serif; transition: all 0.2s; 
        }
        .btn:hover { border-color: var(--brand-primary); }
        .btn.primary { background: var(--brand-primary); border-color: var(--brand-primary); color: white; }
        .btn.edit-active { background: rgba(234, 179, 8, 0.15); border-color: #eab308; color: #eab308; }
        .btn.add-btn { background: rgba(16, 185, 129, 0.15); border-color: var(--accent-green); color: var(--accent-green); }

        .page-title { font-size: 24px; font-weight: 800; margin-bottom: 20px; }

        /* Calendar */
        .calendar-wrapper { 
            background: var(--bg-panel); 
            border: 1px solid var(--border-subtle); 
            border-radius: 12px; 
            overflow: hidden;
        }
        
        .calendar-grid { 
            display: grid; 
            grid-template-columns: 140px repeat(9, 1fr);
        }
        
        .cal-header { 
            padding: 14px 8px; 
            background: var(--bg-sticky); 
            border-bottom: 1px solid var(--border-subtle); 
            border-right: 1px solid var(--border-subtle); 
            text-align: center; 
            font-weight: 700; font-size: 12px; text-transform: uppercase; 
            color: var(--text-secondary); letter-spacing: 0.05em;
        }
        .cal-header:first-child { text-align: left; padding-left: 15px; }
        
        .swimlane { display: contents; }
        
        .swim-label { 
            padding: 0 15px; 
            background: var(--bg-panel); 
            border-right: 1px solid var(--border-subtle); 
            border-bottom: 1px solid var(--border-subtle); 
            font-weight: 700; font-size: 11px; text-transform: uppercase; letter-spacing: 0.03em;
            display: flex; align-items: center; 
            color: var(--text-primary);
            min-height: 75px;
            line-height: 1.4;
        }
        
        .swim-track { 
            grid-column: 2 / -1; 
            position: relative; 
            border-bottom: 1px solid var(--border-subtle); 
            min-height: 75px;
            background: linear-gradient(90deg, var(--bg-deep) 0%, rgba(14,14,18,0.5) 100%);
        }
        .swim-track-double { min-height: 90px; }
        .swim-track-triple { min-height: 115px; }
        .swim-label-double { min-height: 90px; }
        .swim-label-triple { min-height: 115px; }
        
        .track-grid { 
            display: grid; grid-template-columns: repeat(9, 1fr); 
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; 
            pointer-events: none; 
        }
        .track-col { border-right: 1px solid rgba(255,255,255,0.03); height: 100%; }
        .track-col:last-child { border-right: none; }

        /* Bars */
        .bar {
            position: absolute;
            height: 26px;
            border-radius: 5px;
            font-size: 12px;
            font-weight: 600;
            color: white;
            display: flex;
            align-items: center;
            padding: 0 10px;
            cursor: pointer;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            z-index: 5;
            transition: all 0.15s ease;
            top: 50%;
            transform: translateY(-50%);
        }
        .bar:hover { transform: translateY(-50%) scale(1.02); z-index: 15; filter: brightness(1.1); }
        .bar::after { 
            content: ''; position: absolute; top: 0; left: -100%; 
            width: 50%; height: 100%; 
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.15), transparent); 
            transform: skewX(-20deg); animation: shimmer 4s infinite; 
        }
        @keyframes shimmer { 100% { left: 200%; } }
        
        .bar-product { background: linear-gradient(135deg, #d946ef 0%, #a855f7 100%); border: 1px solid rgba(217,70,239,0.4); }
        .bar-social { background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%); border: 1px solid rgba(59,130,246,0.4); }
        .bar-uni { background: linear-gradient(135deg, #10b981 0%, #059669 100%); border: 1px solid rgba(16,185,129,0.4); }
        .bar-influencer { background: linear-gradient(135deg, #eab308 0%, #ca8a04 100%); border: 1px solid rgba(234,179,8,0.4); }
        .bar-culture { background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); border: 1px solid rgba(239,68,68,0.4); }
        .bar-web { background: linear-gradient(135deg, #22d3ee 0%, #0891b2 100%); border: 1px solid rgba(34,211,238,0.4); color: #000; }
        .bar-events { background: linear-gradient(135deg, #f97316 0%, #ea580c 100%); border: 1px solid rgba(249,115,22,0.4); }

        /* Diamonds */
        .diamond {
            position: absolute;
            width: 16px; height: 16px;
            border-radius: 3px;
            transform: translate(-50%, -50%) rotate(45deg);
            cursor: pointer;
            z-index: 10;
            transition: all 0.15s ease;
            top: 50%;
        }
        .diamond:hover { transform: translate(-50%, -50%) rotate(45deg) scale(1.25); z-index: 20; }
        .diamond .d-label {
            position: absolute;
            top: -32px; left: 50%;
            transform: translateX(-50%) rotate(-45deg);
            background: rgba(0,0,0,0.95);
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 11px;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.15s;
            color: white;
            font-weight: 600;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .diamond:hover .d-label { opacity: 1; }
        
        /* Wider Diamond (for 2-3 day events) */
        .diamond-wide {
            width: 22px; 
            height: 22px;
        }
        .diamond-wide:hover { transform: translate(-50%, -50%) rotate(45deg) scale(1.2); }
        
        .diamond-orange { 
            background: linear-gradient(135deg, #f97316 0%, #ea580c 100%); 
            border: 2px solid #fb923c;
            box-shadow: 0 0 10px rgba(249,115,22,0.5), inset 0 0 4px rgba(255,255,255,0.2);
        }
        .diamond-orange:hover { box-shadow: 0 0 16px rgba(249,115,22,0.7); }
        
        .diamond-green { 
            background: linear-gradient(135deg, #10b981 0%, #059669 100%); 
            border: 2px solid #34d399;
            box-shadow: 0 0 10px rgba(16,185,129,0.5), inset 0 0 4px rgba(255,255,255,0.2);
        }
        .diamond-green:hover { box-shadow: 0 0 16px rgba(16,185,129,0.7); }
        
        .diamond-yellow { 
            background: linear-gradient(135deg, #eab308 0%, #ca8a04 100%); 
            border: 2px solid #fbbf24;
            box-shadow: 0 0 10px rgba(234,179,8,0.5), inset 0 0 4px rgba(255,255,255,0.2);
        }
        .diamond-yellow:hover { box-shadow: 0 0 16px rgba(234,179,8,0.7); }
        
        .diamond-cyan { 
            background: linear-gradient(135deg, #22d3ee 0%, #0891b2 100%); 
            border: 2px solid #67e8f9;
            box-shadow: 0 0 10px rgba(34,211,238,0.5), inset 0 0 4px rgba(255,255,255,0.2);
        }
        .diamond-cyan:hover { box-shadow: 0 0 16px rgba(34,211,238,0.7); }
        
        .diamond-red { 
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); 
            border: 2px solid #f87171;
            box-shadow: 0 0 10px rgba(239,68,68,0.5), inset 0 0 4px rgba(255,255,255,0.2);
        }
        .diamond-red:hover { box-shadow: 0 0 16px rgba(239,68,68,0.7); }

        /* Edit mode for calendar items */
        body.edit-mode .bar, body.edit-mode .diamond { cursor: move; }
        body.edit-mode .bar.selected, body.edit-mode .diamond.selected {
            outline: 2px dashed #eab308;
            outline-offset: 2px;
        }
        body.edit-mode .bar .resize-handle {
            position: absolute;
            top: 0;
            width: 10px;
            height: 100%;
            cursor: ew-resize;
            background: rgba(255,255,255,0.25);
            transition: background 0.15s;
        }
        body.edit-mode .bar .resize-handle:hover {
            background: rgba(234, 179, 8, 0.5);
        }
        body.edit-mode .bar .resize-handle.resize-right {
            right: 0;
            border-radius: 0 5px 5px 0;
        }
        body.edit-mode .bar .resize-handle.resize-left {
            left: 0;
            border-radius: 5px 0 0 5px;
        }
        body.edit-mode .bar.resizing {
            opacity: 0.85;
            box-shadow: 0 0 15px rgba(234, 179, 8, 0.4);
        }

        /* Calendar Hint */
        .calendar-hint {
            text-align: center;
            color: var(--text-tertiary);
            font-size: 12px;
            margin-top: 12px;
            margin-bottom: 0;
            font-style: italic;
        }

        /* Details Pane */
        .details-pane { 
            background: var(--bg-panel); 
            border: 1px solid var(--border-subtle); 
            border-radius: 12px; 
            margin-top: 20px; 
            display: none; 
            animation: slideUp 0.25s;
            overflow: hidden;
        }
        .details-pane.active { display: block; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
        
        .pane-header { 
            display: flex; justify-content: space-between; align-items: center;
            padding: 20px 25px;
            border-bottom: 1px solid var(--border-subtle); 
            background: rgba(255,255,255,0.02);
        }
        .pane-title-wrap { flex: 1; }
        .pane-title { font-size: 20px; font-weight: 700; color: var(--text-primary); }
        .pane-meta { color: var(--text-secondary); font-size: 12px; margin-top: 4px; }
        .pane-edit-btn { margin-left: 15px; }
        
        .pane-content { display: grid; grid-template-columns: 1fr 1fr; }
        
        .pane-left { padding: 25px; border-right: 1px solid var(--border-subtle); }
        .pane-right { padding: 25px; background: rgba(16, 185, 129, 0.03); }
        
        .section-label { 
            color: var(--text-secondary); 
            font-size: 10px; text-transform: uppercase; letter-spacing: 0.1em; font-weight: 700; 
            margin-bottom: 12px;
        }
        
        .deliverables-list { list-style: none; }
        .deliverables-list li { 
            margin-bottom: 10px; padding-left: 16px; position: relative; 
            color: var(--text-primary); font-size: 13px; line-height: 1.5; 
        }
        .deliverables-list li::before { content: "▹"; position: absolute; left: 0; color: var(--brand-primary); font-size: 12px; }
        
        .impact-title { color: var(--accent-green); font-size: 10px; text-transform: uppercase; font-weight: 700; letter-spacing: 0.1em; margin-bottom: 12px; }
        .impact-text { font-size: 13px; color: var(--text-secondary); line-height: 1.7; }

        /* Editable states */
        .editable-active { 
            border: 1px dashed var(--border-edit) !important; 
            background: rgba(234, 179, 8, 0.05) !important; 
            padding: 8px !important;
            border-radius: 4px;
        }

        /* Add Item Modal */
        .modal-overlay { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.85); z-index: 1000; 
            display: none; justify-content: center; align-items: center; 
            backdrop-filter: blur(5px); 
        }
        .modal { 
            background: var(--bg-panel); padding: 25px; border-radius: 12px; 
            border: 1px solid var(--border-subtle); width: 400px; max-width: 90%; 
        }
        .modal h3 { margin-bottom: 20px; font-size: 16px; }
        .form-group { margin-bottom: 12px; }
        .form-group label { display: block; font-size: 11px; color: var(--text-secondary); margin-bottom: 4px; }
        .form-group input, .form-group select, .form-group textarea { 
            width: 100%; padding: 8px; background: var(--bg-deep); 
            border: 1px solid var(--border-subtle); color: var(--text-primary); 
            border-radius: 5px; font-family: 'Montserrat', sans-serif; font-size: 12px;
        }
        .form-group textarea { resize: vertical; min-height: 80px; }
        .form-row { display: flex; gap: 10px; }
        .form-row .form-group { flex: 1; }
        .modal-actions { display: flex; justify-content: flex-end; gap: 8px; margin-top: 15px; }

        /* Toast */
        .toast { 
            position: fixed; bottom: 25px; right: 25px; 
            background: var(--bg-panel); border: 1px solid var(--brand-primary); 
            color: var(--text-primary); padding: 12px 20px; border-radius: 8px; 
            transform: translateY(100px); opacity: 0; transition: all 0.3s; z-index: 2000; 
            font-size: 12px; font-weight: 600;
        }
        .toast.show { transform: translateY(0); opacity: 1; }
        .toast.warning { border-color: #eab308; background: rgba(234, 179, 8, 0.1); }

        /* Unsaved indicator */
        .unsaved-indicator {
            display: none;
            background: rgba(234, 179, 8, 0.15);
            color: #eab308;
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 10px;
            font-weight: 600;
        }
        .unsaved-indicator.show { display: inline-block; }

        /* Strategic Overview Section */
        .strategic-overview {
            background: var(--bg-panel);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
        }
        .overview-summary {
            color: var(--text-secondary);
            font-size: 14px;
            line-height: 1.7;
            margin-bottom: 25px;
            max-width: 900px;
        }
        .info-boxes {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-bottom: 25px;
        }
        .info-box {
            background: var(--bg-deep);
            border: 1px solid var(--border-subtle);
            border-radius: 8px;
            padding: 18px;
        }
        .info-box-header {
            color: #eab308;
            font-size: 10px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 12px;
        }
        .info-box p {
            color: var(--text-primary);
            font-size: 13px;
            line-height: 1.6;
            margin-bottom: 8px;
        }
        .info-box p:last-child { margin-bottom: 0; }

        /* Strategy Buttons */
        .strategy-buttons {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }
        .strategy-btn {
            flex: 1;
            padding: 14px 20px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            cursor: pointer;
            transition: all 0.2s;
            font-family: 'Montserrat', sans-serif;
            text-align: center;
        }
        .strategy-btn.outline {
            background: transparent;
            border: 1px solid var(--border-active);
            color: var(--text-primary);
        }
        .strategy-btn.outline:hover {
            border-color: var(--brand-primary);
            background: rgba(99, 102, 241, 0.1);
        }
        .strategy-btn.outline.active {
            border-color: var(--brand-primary);
            background: rgba(99, 102, 241, 0.15);
        }
        .strategy-btn.filled {
            background: var(--cat-social);
            border: 1px solid var(--cat-social);
            color: white;
        }
        .strategy-btn.filled:hover {
            filter: brightness(1.1);
        }
        .strategy-btn.filled.active {
            box-shadow: 0 0 15px rgba(59, 130, 246, 0.4);
        }

        /* Strategy Content Panels */
        .strategy-content {
            display: none;
            background: var(--bg-deep);
            border: 1px solid var(--border-subtle);
            border-radius: 8px;
            padding: 20px;
            margin-top: -5px;
            animation: fadeIn 0.2s ease;
        }
        .strategy-content.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .strategy-content h4 {
            color: var(--text-primary);
            font-size: 14px;
            font-weight: 700;
            margin-bottom: 10px;
        }
        .strategy-content p {
            color: var(--text-secondary);
            font-size: 13px;
            line-height: 1.7;
        }

        /* Calendar Helper Text */
        .calendar-helper {
            text-align: center;
            color: var(--text-tertiary);
            font-size: 12px;
            margin-top: 15px;
            font-style: italic;
        }
    </style>
</head>
<body class="">

<!-- Settings Modal -->
<div class="modal-overlay" id="settingsModal" style="display: none;">
    <div class="modal">
        <h3>⚙ GitHub Settings</h3>
        <div class="form-group"><label>GitHub Username</label><input type="text" id="ghUsername" placeholder="username"></div>
        <div class="form-group"><label>Repository Name</label><input type="text" id="ghRepo" placeholder="repo-name"></div>
        <div class="form-group"><label>Personal Access Token (repo scope)</label><input type="password" id="ghToken" placeholder="ghp_..."></div>
        <div class="form-group"><label>File Path</label><input type="text" id="ghPath" value="marketing.html"></div>
        <div class="modal-actions">
            <button class="btn" onclick="closeModal('settingsModal')">Cancel</button>
            <button class="btn primary" onclick="saveSettings()">Save</button>
        </div>
    </div>
</div>

<!-- Add Item Modal -->
<div class="modal-overlay" id="addItemModal">
    <div class="modal">
        <h3>+ Add Calendar Item</h3>
        <div class="form-group">
            <label>Item Type</label>
            <select id="newItemType">
                <option value="bar">Bar (Date Range)</option>
                <option value="diamond">Diamond (Single Date)</option>
            </select>
        </div>
        <div class="form-group"><label>Title</label><input type="text" id="newItemTitle" placeholder="Item name"></div>
        <div class="form-group">
            <label>Category / Row</label>
            <select id="newItemCategory">
                <option value="product">Product Marketing</option>
                <option value="social">Social Media</option>
                <option value="events">Crypto Events &amp; Meetups</option>
                <option value="uni">University Engagement</option>
                <option value="influencer">Influencer &amp; Affiliate</option>
                <option value="web">Website &amp; Channels</option>
                <option value="culture">Cultural Moments</option>
            </select>
        </div>
        <div class="form-row">
            <div class="form-group"><label>Start Date</label><input type="date" id="newItemStart"></div>
            <div class="form-group" id="endDateGroup"><label>End Date</label><input type="date" id="newItemEnd"></div>
        </div>
        <div class="form-group"><label>Deliverables (one per line)</label><textarea id="newItemDeliverables" placeholder="Task 1
Task 2
Task 3"></textarea></div>
        <div class="form-group"><label>Business Impact</label><textarea id="newItemImpact" placeholder="Describe the expected business impact..."></textarea></div>
        <div class="modal-actions">
            <button class="btn" onclick="closeModal('addItemModal')">Cancel</button>
            <button class="btn primary" onclick="addNewItem()">Add Item</button>
        </div>
    </div>
</div>

<div id="toast" class="toast">Settings saved</div>

<div class="container">
    <header class="header">
        <div class="brand">
            <div class="logo"><span class="logo-icon">◆</span> Solvida</div>
            <span style="color: var(--text-tertiary); margin: 0 10px;">|</span>
            <span style="color: var(--text-secondary); font-size: 12px;">Exchange Product</span>
        </div>
        <div class="nav-tabs">
            <a href="index.html" class="nav-tab">Product Roadmap</a>
            <a href="#" class="nav-tab active">Marketing Calendar</a>
        </div>
        <div class="header-controls">
            <span class="unsaved-indicator show" id="unsavedIndicator">● Unsaved Changes</span>
            <button class="btn add-btn" onclick="openModal('addItemModal')">+ Add Item</button>
            <button class="btn" onclick="toggleEditMode()" id="editBtn">Edit</button>
            <button class="btn" onclick="openModal('settingsModal')">⚙</button>
            <button class="btn primary" onclick="publishToGitHub()" id="publishBtn" disabled="">Publishing...</button>
        </div>
    </header>

    <h1 class="page-title">Solvida Marketing Calendar</h1>

    <!-- Strategic Overview Section -->
    <div class="strategic-overview">
        <p class="overview-summary">
            This marketing calendar outlines Solvida's go-to-market strategy for establishing Colombia's leading crypto exchange. 
            The plan focuses on building credibility through product marketing, creating anticipation via community engagement, 
            and scaling customer acquisition through performance marketing and strategic partnerships.
        </p>

        <div class="info-boxes">
            <div class="info-box">
                <div class="info-box-header">Business Objectives</div>
                <p>$10M in Daily Trading Volume by Date TBC</p>
                <p>10,000 DAUs by Date TBC</p>
            </div>
            <div class="info-box">
                <div class="info-box-header">Marketing Objectives</div>
                <p>Deliver consistent growth of verified traders who trade.</p>
                <p>Become known as the #1 homegrown crypto exchange in Colombia.</p>
                <p>Establish Solvida as more than a crypto brand (Lifestyle, Culture).</p>
            </div>
            <div class="info-box">
                <div class="info-box-header">Mindset</div>
                <p>Earn vs Buy</p>
                <p>Culture vs Capital</p>
                <p>Inside Out vs Outside In</p>
            </div>
            <div class="info-box">
                <div class="info-box-header">End Goal Metrics</div>
                <p>Volume target: $XXXM total trading volume</p>
                <p>Monthly active traders: 15,000</p>
                <p>CAC: Reduce from $50 to &lt;$25</p>
                <p>30-40% MoM retained traders</p>
            </div>
        </div>

        <div class="strategy-buttons">
            <button class="strategy-btn outline" onclick="toggleStrategy('private')">Private Client Nurture</button>
            <button class="strategy-btn outline" onclick="toggleStrategy('community')">Community Development</button>
            <button class="strategy-btn outline active" onclick="toggleStrategy('acquisition')">Customer Acquisition</button>
        </div>

        <div class="strategy-content" id="strategy-private">
            <h4>Establish Credibility (OWNED)</h4>
            <p>Product Marketing focus. Launching Solvida.co blog and establishing Solvida X voice. Direct outreach to high-value early adopters.</p>
        </div>
        <div class="strategy-content" id="strategy-community">
            <h4>Create Anticipation (OWNED + EARNED)</h4>
            <p>Waitlist Incentives + Community Promos. Micro Influencers, KOLs, Grassroots Meetups (ETH Cali). Content Marketing, SEO, PR.</p>
        </div>
        <div class="strategy-content active" id="strategy-acquisition">
            <h4>Volume &amp; Scale (OWNED + EARNED + PAID)</h4>
            <p>Performance Marketing activation. Affiliate / Macro Influencers. Strategic Partnerships and Sponsored Events.</p>
        </div>
    </div>

    <div class="calendar-wrapper">
        <div class="calendar-grid" id="calendarGrid">
            <!-- Headers: Dec 2025 - Aug 2026 -->
            <div class="cal-header"></div>
            <div class="cal-header">Dec 2025</div>
            <div class="cal-header">Jan 2026</div>
            <div class="cal-header">Feb 2026</div>
            <div class="cal-header">Mar 2026</div>
            <div class="cal-header">Apr 2026</div>
            <div class="cal-header">May 2026</div>
            <div class="cal-header">Jun 2026</div>
            <div class="cal-header">Jul 2026</div>
            <div class="cal-header">Aug 2026</div>

            <!-- PRODUCT MARKETING (2 rows within) -->
            <div class="swimlane" data-category="product">
                <div class="swim-label swim-label-double" style="border-left: 3px solid var(--cat-product);">Product<br>Marketing</div>
                <div class="swim-track swim-track-double" id="track-product">
                    <div class="track-grid"><div class="track-col"></div><div class="track-col"></div><div class="track-col"></div><div class="track-col"></div><div class="track-col"></div><div class="track-col"></div><div class="track-col"></div><div class="track-col"></div><div class="track-col"></div></div>
                    <!-- Row 1: KYC, Solvida Pro, Platform Gamification (with 2px gaps) -->
                    <div class="bar bar-product" data-id="kyc" style="left: 14.5%; width: 4.8%; top: 28%; transform: translateY(-50%);" draggable="false">KYC Education</div>
                    <div class="bar bar-product" data-id="pro" style="left: 19.6%; width: 4.8%; top: 28%; transform: translateY(-50%);" draggable="false">Solvida Pro</div>
                    <div class="bar bar-product" data-id="gamify" style="left: 55.5%; width: 11%; top: 28%; transform: translateY(-50%);" draggable="false">Platform Gamification</div>
                    <!-- Row 2: Public Waitlist (Mar 1 - Jun 1) -->
                    <div class="bar bar-product" data-id="waitlist" style="left: 22.2%; width: 33.3%; top: 72%; transform: translateY(-50%);" draggable="false">Public Waitlist (SignUp Incentive)</div>
                </div>
            </div>

            <!-- SOCIAL MEDIA (3 rows within) -->
            <div class="swimlane" data-category="social">
                <div class="swim-label swim-label-triple" style="border-left: 3px solid var(--cat-social);">Social Media &amp;<br>Community</div>
                <div class="swim-track swim-track-triple" id="track-social">
                    <div class="track-grid"><div class="track-col"></div><div class="track-col"></div><div class="track-col"></div><div class="track-col"></div><div class="track-col"></div><div class="track-col"></div><div class="track-col"></div><div class="track-col"></div><div class="track-col"></div></div>
                    <!-- Row 1: Follower Acquisition (Dec 15 - Jan 3) -->
                    <div class="bar bar-social" data-id="follower-acq" style="left: 5.5%; width: 7%; top: 20%; transform: translateY(-50%);" draggable="false">Follower Acquisition (Paid)</div>
                    <!-- Row 2: Community Outreach (Dec 15 - Jan 15) -->
                    <div class="bar bar-social" data-id="community-outreach" style="left: 5.5%; width: 11%; top: 50%; transform: translateY(-50%);" draggable="false">Community Outreach</div>
                    <!-- Row 3: EneroSinCuesta (Jan 1 - Jan 31) -->
                    <div class="bar bar-social" data-id="enero" style="left: 11.1%; width: 11%; top: 80%; transform: translateY(-50%); padding-left: 5px;" draggable="false">EneroSinCuesta Campaign</div>
                </div>
            </div>

            <!-- CRYPTO EVENTS & MEETUPS -->
            <div class="swimlane" data-category="events">
                <div class="swim-label" style="border-left: 3px solid var(--cat-events);">Crypto Events<br>&amp; Meetups</div>
                <div class="swim-track" id="track-events">
                    <div class="track-grid"><div class="track-col"></div><div class="track-col"></div><div class="track-col"></div><div class="track-col"></div><div class="track-col"></div><div class="track-col"></div><div class="track-col"></div><div class="track-col"></div><div class="track-col"></div></div>
                    <!-- Uniswap x ETH Cali: Dec 20 -->
                    <div class="diamond diamond-orange" data-id="uniswap-eth-cali" style="left: 7.3%;" draggable="false"><span class="d-label">Uniswap x ETH Cali · Dec 20</span></div>
                    <!-- Bitcoin Medellin: Jan 15-16 (wider diamond) -->
                    <div class="diamond diamond-orange diamond-wide" data-id="bitcoin-medellin" style="left: 16.5%;" draggable="false"><span class="d-label">Bitcoin Medellin · Jan 15-16</span></div>
                    <!-- ETH Cali: Jan 30 -->
                    <div class="diamond diamond-orange" data-id="eth-cali" style="left: 21%;" draggable="false"><span class="d-label">ETH Cali · Jan 30</span></div>
                    <!-- ETH Bogota: Feb 15 -->
                    <div class="diamond diamond-orange" data-id="eth-bogota" style="left: 27.5%;" draggable="false"><span class="d-label">ETH Bogota · Feb 15</span></div>
                    <!-- ETH Medellin: Mar 15 -->
                    <div class="diamond diamond-orange" data-id="eth-medellin" style="left: 38.5%;" draggable="false"><span class="d-label">ETH Medellin · Mar 15</span></div>
                    <!-- Consensus Miami: May 5-7 (wider diamond) -->
                    <div class="diamond diamond-orange diamond-wide" data-id="consensus-miami" style="left: 57%;" draggable="false"><span class="d-label">Consensus Miami · May 5-7</span></div>
                    <!-- Crypto Latin Fest: Aug 15 -->
                    <div class="diamond diamond-orange" data-id="crypto-latin-fest" style="left: 94%;" draggable="false"><span class="d-label">Crypto Latin Fest · Aug 15</span></div>
                </div>
            </div>

            <!-- UNIVERSITY ENGAGEMENT -->
            <div class="swimlane" data-category="uni">
                <div class="swim-label" style="border-left: 3px solid var(--cat-uni);">University<br>Engagement</div>
                <div class="swim-track" id="track-uni">
                    <div class="track-grid"><div class="track-col"></div><div class="track-col"></div><div class="track-col"></div><div class="track-col"></div><div class="track-col"></div><div class="track-col"></div><div class="track-col"></div><div class="track-col"></div><div class="track-col"></div></div>
                    <!-- University List: Dec 15 - Dec 22 (with 2px gaps) -->
                    <div class="bar bar-uni" data-id="uni-list" style="left: 5.5%; width: 2.2%;" draggable="false">University List</div>
                    <!-- Program Dev: Dec 22 - Jan 15 -->
                    <div class="bar bar-uni" data-id="uni-program" style="left: 8%; width: 8.2%;" draggable="false">Program Dev</div>
                    <!-- University Outreach: Jan 15 - Jan 20 -->
                    <div class="bar bar-uni" data-id="uni-outreach" style="left: 16.5%; width: 2%;" draggable="false">Outreach</div>
                    <!-- Co Promotion: Apr 1 - Apr 30 -->
                    <div class="bar bar-uni" data-id="uni-copromotion" style="left: 44.4%; width: 11%;" draggable="false">Co Promotion</div>
                    <!-- University 1-4 diamonds -->
                    <div class="diamond diamond-green" data-id="uni-event-1" style="left: 56%;" draggable="false"><span class="d-label">University 1 · May 1</span></div>
                    <div class="diamond diamond-green" data-id="uni-event-2" style="left: 61%;" draggable="false"><span class="d-label">University 2 · May 15</span></div>
                    <div class="diamond diamond-green" data-id="uni-event-3" style="left: 66.6%;" draggable="false"><span class="d-label">University 3 · Jun 1</span></div>
                    <div class="diamond diamond-green" data-id="uni-event-4" style="left: 72%;" draggable="false"><span class="d-label">University 4 · Jun 15</span></div>
                </div>
            </div>

            <!-- INFLUENCER -->
            <div class="swimlane" data-category="influencer">
                <div class="swim-label" style="border-left: 3px solid var(--cat-influencer);">Influencer &amp;<br>Affiliate</div>
                <div class="swim-track" id="track-influencer">
                    <div class="track-grid"><div class="track-col"></div><div class="track-col"></div><div class="track-col"></div><div class="track-col"></div><div class="track-col"></div><div class="track-col"></div><div class="track-col"></div><div class="track-col"></div><div class="track-col"></div></div>
                    <!-- List Dev & Outreach: Dec 15 - Jan 15 (with 2px gaps) -->
                    <div class="bar bar-influencer" data-id="inf-outreach" style="left: 5.5%; width: 10.7%;" draggable="false">List Dev &amp; Outreach</div>
                    <!-- Program Dev: Jan 15 - Feb 15 -->
                    <div class="bar bar-influencer" data-id="inf-program" style="left: 16.5%; width: 10.7%;" draggable="false">Program Dev</div>
                    <!-- Recruitment: Feb 15 - Mar 15 -->
                    <div class="bar bar-influencer" data-id="inf-recruitment" style="left: 27.5%; width: 10.7%;" draggable="false">Recruitment</div>
                    <!-- Program Launch: Apr 1 -->
                    <div class="diamond diamond-yellow" data-id="inf-launch" style="left: 44.4%;" draggable="false"><span class="d-label">Program Launch · Apr 1</span></div>
                    <!-- Program Live: Jun 1+ -->
                    <div class="bar bar-influencer" data-id="inf-live" style="left: 67.0303%; width: 21.4793%;" draggable="false">Program Live (Revenue)</div>
                </div>
            </div>

            <!-- WEBSITE & CHANNELS -->
            <div class="swimlane" data-category="web">
                <div class="swim-label" style="border-left: 3px solid var(--cat-web);">Website &amp;<br>Channels</div>
                <div class="swim-track" id="track-web">
                    <div class="track-grid"><div class="track-col"></div><div class="track-col"></div><div class="track-col"></div><div class="track-col"></div><div class="track-col"></div><div class="track-col"></div><div class="track-col"></div><div class="track-col"></div><div class="track-col"></div></div>
                    <!-- Solvida Blog: Dec 29 -->
                    <div class="diamond diamond-cyan" data-id="blog-live" style="left: 10.5%;" draggable="false"><span class="d-label">Solvida Blog Live · Dec 29</span></div>
                    <!-- Markets: Jan 15 -->
                    <div class="diamond diamond-cyan" data-id="markets-page" style="left: 16.5%;" draggable="false"><span class="d-label">Markets · Jan 15</span></div>
                    <!-- Telegram: Feb 1 (same day as Customer Service, stack) -->
                    <div class="diamond diamond-cyan" data-id="telegram" style="left: 22.2%; top: 30%; transform: translate(-50%, -50%) rotate(45deg);" draggable="false"><span class="d-label">Telegram · Feb 1</span></div>
                    <!-- Customer Service Bot: Feb 1 -->
                    <div class="diamond diamond-cyan" data-id="customer-service" style="left: 22.2%; top: 70%; transform: translate(-50%, -50%) rotate(45deg);" draggable="false"><span class="d-label">Customer Service Bot · Feb 1</span></div>
                    <!-- Pro & Lite Lander: Feb 15 -->
                    <div class="diamond diamond-cyan" data-id="pro-lander" style="left: 27.5%;" draggable="false"><span class="d-label">Pro &amp; Lite Lander · Feb 15</span></div>
                    <!-- Discord: Mar 1 -->
                    <div class="diamond diamond-cyan" data-id="discord" style="left: 33.3%;" draggable="false"><span class="d-label">Discord · Mar 1</span></div>
                    <!-- Whatsapp: Apr 1 -->
                    <div class="diamond diamond-cyan" data-id="whatsapp" style="left: 44.4%;" draggable="false"><span class="d-label">Whatsapp · Apr 1</span></div>
                    <!-- Instagram: May 1 (same day as TikTok, stack) -->
                    <div class="diamond diamond-cyan" data-id="instagram" style="left: 55.5%; top: 30%; transform: translate(-50%, -50%) rotate(45deg);" draggable="false"><span class="d-label">Instagram · May 1</span></div>
                    <!-- TikTok: May 1 -->
                    <div class="diamond diamond-cyan" data-id="tiktok" style="left: 55.5%; top: 70%; transform: translate(-50%, -50%) rotate(45deg);" draggable="false"><span class="d-label">TikTok · May 1</span></div>
                </div>
            </div>

            <!-- CULTURAL MOMENTS -->
            <div class="swimlane" data-category="culture">
                <div class="swim-label" style="border-left: 3px solid var(--cat-culture);">Cultural<br>Moments</div>
                <div class="swim-track" id="track-culture" style="border-bottom: none;">
                    <div class="track-grid"><div class="track-col"></div><div class="track-col"></div><div class="track-col"></div><div class="track-col"></div><div class="track-col"></div><div class="track-col"></div><div class="track-col"></div><div class="track-col"></div><div class="track-col"></div></div>
                    <!-- Semana Santa: Apr 2-3 (wider diamond) -->
                    <div class="diamond diamond-red diamond-wide" data-id="semana-santa" style="left: 45%;" draggable="false"><span class="d-label">Semana Santa · Apr 2-3</span></div>
                    <!-- Día del Trabajo: May 1 -->
                    <div class="diamond diamond-red" data-id="dia-trabajo" style="left: 55.5%;" draggable="false"><span class="d-label">Día del Trabajo · May 1</span></div>
                    <!-- FIFA World Cup: Jun 11 - Jul 14 -->
                    <div class="bar bar-culture" data-id="fifa-world-cup" style="left: 59%; width: 19%;" draggable="false">FIFA World Cup</div>
                    <!-- Día de la Independencia: Jul 20 -->
                    <div class="diamond diamond-red" data-id="independencia" style="left: 80%;" draggable="false"><span class="d-label">Día de la Independencia · Jul 20</span></div>
                    <!-- Batalla de Boyacá: Aug 7 -->
                    <div class="diamond diamond-red" data-id="batalla-boyaca" style="left: 91%;" draggable="false"><span class="d-label">Batalla de Boyacá · Aug 7</span></div>
                </div>
            </div>
        </div>
    </div>

    <p class="calendar-hint">Click on any item for further details</p>

    <!-- Details Pane -->
    <div class="details-pane active" id="detailPane">
        <div class="pane-header">
            <div class="pane-title-wrap">
                <div class="pane-title" id="dTitle">Public Waitlist</div>
                <div class="pane-meta" id="dDate">Mar 1 - Jun 1</div>
            </div>
            <button class="btn pane-edit-btn" onclick="togglePaneEdit()" id="paneEditBtn">✎ Edit</button>
        </div>
        <div class="pane-content">
            <div class="pane-left">
                <div class="section-label">Deliverables</div>
                <ul class="deliverables-list" id="dList"><li>Referral mechanic with rewards</li><li>Exclusive swag for top referrers</li><li>Weekly feature drops</li><li>Email nurture sequence</li><li>Social proof campaigns</li></ul>
            </div>
            <div class="pane-right">
                <div class="impact-title">Business Impact</div>
                <p class="impact-text" id="dImpact">Build database of 50k+ leads. Create anticipation and FOMO. Generate organic growth through referrals.</p>
            </div>
        </div>
    </div>
</div>

<script>
    // Data Store
    const campaignData = {
        'kyc': { title: 'KYC Education Campaign', date: 'Jan 26 - Feb 8', start: '2026-01-26', end: '2026-02-08', tasks: ['Video tutorials for COP deposit process', 'Blog post series on asset protection', 'Email sequence for unverified users', 'In-app tooltips and guided onboarding', 'FAQ section expansion'], impact: 'Increase verification conversion by 15%. Reduce support tickets by 30%. Build trust through transparency.' },
        'pro': { title: 'Solvida Pro Launch', date: 'Feb 9 - Feb 22', start: '2026-02-09', end: '2026-02-22', tasks: ['Advanced trader targeting via paid ads', 'Trading competition with leaderboard', 'Pro features highlight video series', 'Webinar for professional traders', 'Early access program'], impact: 'Acquire high-volume traders. Target 500+ Pro accounts in first month. Increase average transaction volume by 40%.' },
        'waitlist': { title: 'Public Waitlist', date: 'Mar 1 - Jun 1', start: '2026-03-01', end: '2026-06-01', tasks: ['Referral mechanic with rewards', 'Exclusive swag for top referrers', 'Weekly feature drops', 'Email nurture sequence', 'Social proof campaigns'], impact: 'Build database of 50k+ leads. Create anticipation and FOMO. Generate organic growth through referrals.' },
        'gamify': { title: 'Platform Gamification', date: 'Jun 1 - Jun 30', start: '2026-06-01', end: '2026-06-30', tasks: ['Trading leaderboards', 'Achievement badges system', 'Trading streaks and daily challenges', 'Rewards program integration', 'Social sharing'], impact: 'Increase daily active usage by 25%. Improve retention by 30%. Create viral sharing moments.' },
        'follower-acq': { title: 'Follower Acquisition (Paid)', date: 'Dec 15 - Jan 3', start: '2025-12-15', end: '2026-01-03', tasks: ['Paid Twitter/X promotion', 'Engagement campaigns', 'Influencer collaborations', 'Value-driven content calendar', 'Community growth tactics'], impact: 'Grow follower base by 10k+ per month. Increase brand awareness in LATAM crypto space.' },
        'community-outreach': { title: 'Community Outreach', date: 'Dec 15 - Jan 15', start: '2025-12-15', end: '2026-01-15', tasks: ['Daily engagement with crypto communities', 'AMA sessions and Q&A threads', 'User-generated content campaigns', 'Community moderator program', 'Feedback collection'], impact: 'Build authentic relationships. Increase community sentiment. Generate organic word-of-mouth.' },
        'enero': { title: 'EneroSinCuesta Campaign', date: 'Jan 1 - Jan 31', start: '2026-01-01', end: '2026-01-31', tasks: ['Capitalize on "January Financial Hangover"', 'Promote Earn products', 'Community savings contest', 'Social media content series', 'Financial wellness partnerships'], impact: 'Drive engagement during slow financial month. Position Solvida as financial ally. 20% increase in Earn adoption.' },
        'uniswap-eth-cali': { title: 'Uniswap x ETH Cali', date: 'Dec 20', start: '2025-12-20', end: '2025-12-20', tasks: ['Sponsorship and booth presence', 'Live product demos', 'Developer networking', 'Swag distribution', 'Social media content'], impact: 'Connect with 500+ attendees. Generate 50+ qualified leads. Establish community presence.' },
        'bitcoin-medellin': { title: 'Bitcoin Medellin', date: 'Jan 15-16', start: '2026-01-15', end: '2026-01-16', tasks: ['Community meetup sponsorship', 'Educational presentation', 'Local influencer partnerships', 'Product feedback session', 'Brand awareness'], impact: 'Engage with 200+ local enthusiasts. Build regional presence. Collect user insights.' },
        'eth-cali': { title: 'ETH Cali', date: 'Jan 30', start: '2026-01-30', end: '2026-01-30', tasks: ['Main stage presentation', 'Developer workshop', 'Sponsor networking dinner', 'Media interviews', 'Product announcement'], impact: 'Position as thought leader. Generate media coverage. Acquire institutional contacts.' },
        'eth-bogota': { title: 'ETH Bogota', date: 'Feb 15', start: '2026-02-15', end: '2026-02-15', tasks: ['Conference sponsorship', 'Technical talk', 'Developer relations', 'Partnership announcements', 'Influencer engagement'], impact: 'Reach 1000+ attendees. Establish technical credibility. Generate partnerships.' },
        'eth-medellin': { title: 'ETH Medellin', date: 'Mar 15', start: '2026-03-15', end: '2026-03-15', tasks: ['Regional event presence', 'Local community building', 'Product demonstrations', 'Educational workshops', 'Regional expansion'], impact: 'Strengthen Medellin presence. Build local ambassador network. Drive regional acquisition.' },
        'consensus-miami': { title: 'Consensus Miami', date: 'May 5-7', start: '2026-05-05', end: '2026-05-07', tasks: ['International conference presence', 'LATAM panel participation', 'Cross-border partnerships', 'Media coverage', 'Global positioning'], impact: 'Expand brand recognition. Connect with international investors. Explore expansion.' },
        'crypto-latin-fest': { title: 'Crypto Latin Fest', date: 'Aug 15', start: '2026-08-15', end: '2026-08-15', tasks: ['Major regional sponsorship', 'Main stage presentation', 'Product launch announcements', 'Influencer summit', 'Awards campaigns'], impact: 'Reach 5000+ attendees. Establish as leading LATAM exchange. Generate media coverage.' },
        'uni-list': { title: 'University List & Contacts', date: 'Dec 15 - Dec 22', start: '2025-12-15', end: '2025-12-22', tasks: ['Research and compile database', 'Identify key contacts', 'Create outreach templates', 'Establish initial relationships', 'Schedule meetings'], impact: 'Build foundation for partnerships. Create pipeline of 50+ contacts. Enable scalable program.' },
        'uni-program': { title: 'Program Development', date: 'Dec 22 - Jan 15', start: '2025-12-22', end: '2026-01-15', tasks: ['Curriculum development', 'Partnership agreement templates', 'Student ambassador program', 'Educational content', 'Launch materials'], impact: 'Create structured approach. Enable consistent messaging. Build scalable education model.' },
        'uni-outreach': { title: 'University Outreach', date: 'Jan 15 - Jan 20', start: '2026-01-15', end: '2026-01-20', tasks: ['Direct outreach to contacts', 'Presentation scheduling', 'Partnership proposals', 'Follow-up communications', 'Agreement negotiations'], impact: 'Secure 10+ partnerships. Establish as educational partner. Create student acquisition pipeline.' },
        'uni-copromotion': { title: 'Co Promotion', date: 'Apr 1 - Apr 30', start: '2026-04-01', end: '2026-04-30', tasks: ['Joint marketing campaigns', 'Student workshops', 'Case study development', 'Success stories', 'Relationship management'], impact: 'Reach 5000+ students. Build brand loyalty among young adults. Long-term acquisition channel.' },
        'uni-event-1': { title: 'University Event 1', date: 'May 1', start: '2026-05-01', end: '2026-05-01', tasks: ['On-campus workshop', 'Product demonstration', 'Student recruitment', 'Content creation', 'Feedback collection'], impact: 'Engage 100+ students. Generate sign-ups and referrals. Build university presence.' },
        'uni-event-2': { title: 'University Event 2', date: 'May 15', start: '2026-05-15', end: '2026-05-15', tasks: ['Educational seminar', 'Q&A session', 'Faculty networking', 'Ambassador recruitment', 'Partnership strengthening'], impact: 'Deepen relationships. Recruit ambassadors. Generate educational content.' },
        'uni-event-3': { title: 'University Event 3', date: 'Jun 1', start: '2026-06-01', end: '2026-06-01', tasks: ['Career fair participation', 'Internship program', 'Industry connections', 'Student projects', 'Brand visibility'], impact: 'Position as employer of choice. Build talent pipeline. Increase awareness.' },
        'uni-event-4': { title: 'University Event 4', date: 'Jun 15', start: '2026-06-15', end: '2026-06-15', tasks: ['End-of-semester celebration', 'Success stories', 'Program evaluation', 'Next semester planning', 'Alumni network'], impact: 'Maintain engagement. Build alumni network. Plan expanded program.' },
        'inf-outreach': { title: 'List Development & Outreach', date: 'Dec 15 - Jan 15', start: '2025-12-15', end: '2026-01-15', tasks: ['Identify relevant influencers', 'Outreach to micro/macro influencers', 'Partnership proposals', 'Initial discussions', 'Contract negotiations'], impact: 'Build pipeline of 100+ partnerships. Establish relationships before launch.' },
        'inf-program': { title: 'Program Development', date: 'Jan 15 - Feb 15', start: '2026-01-15', end: '2026-02-15', tasks: ['Program structure and guidelines', 'Compensation model', 'Content requirements', 'Tracking and analytics', 'Onboarding materials'], impact: 'Create scalable program. Enable consistent messaging. Establish ROI metrics.' },
        'inf-recruitment': { title: 'Recruitment & Onboarding', date: 'Feb 15 - Mar 15', start: '2026-02-15', end: '2026-03-15', tasks: ['Active recruitment', 'Vetting and selection', 'Onboarding sessions', 'Content strategy alignment', 'Campaign briefings'], impact: 'Recruit 50+ active influencers. Ensure quality and brand fit. Prepare for launch.' },
        'inf-launch': { title: 'Program Launch', date: 'Apr 1', start: '2026-04-01', end: '2026-04-01', tasks: ['Program kickoff event', 'Coordinated launch content', 'Media announcement', 'First wave content', 'Performance tracking'], impact: 'Generate brand awareness. Reach 500k+ potential users. Establish credibility.' },
        'inf-live': { title: 'Program Live (Revenue)', date: 'Jun 1+', start: '2026-06-01', end: '2026-08-31', tasks: ['Ongoing content creation', 'Performance monitoring', 'New influencer onboarding', 'Revenue tracking', 'Program expansion'], impact: 'Consistent user acquisition. 20%+ conversion rate. Scale to 100+ influencers. Target $25 CAC.' },
        'blog-live': { title: 'Solvida Blog Live', date: 'Dec 29', start: '2025-12-29', end: '2025-12-29', tasks: ['Blog platform setup', 'Initial content (10+ articles)', 'SEO optimization', 'Content calendar', 'Social integration'], impact: 'Establish thought leadership. Drive organic traffic. Target 5k+ monthly visitors.' },
        'markets-page': { title: 'Markets Page', date: 'Jan 15', start: '2026-01-15', end: '2026-01-15', tasks: ['Real-time market data', 'Charting features', 'SEO-optimized pages', 'Social sharing', 'Performance monitoring'], impact: 'Capture high-intent traffic. Provide value to traders. Support organic discovery.' },
        'customer-service': { title: 'Customer Service Bot', date: 'Feb 1', start: '2026-02-01', end: '2026-02-01', tasks: ['AI chatbot implementation', 'FAQ automation', 'Ticket routing', 'Response templates', 'Performance monitoring'], impact: 'Reduce response time by 50%. Handle 80% of common queries. Improve satisfaction.' },
        'pro-lander': { title: 'Pro & Lite Lander', date: 'Feb 15', start: '2026-02-15', end: '2026-02-15', tasks: ['Landing page design', 'Feature highlights', 'Conversion optimization', 'A/B testing', 'Analytics integration'], impact: 'Improve sign-up conversion by 30%. Provide clear value proposition.' },
        'telegram': { title: 'Telegram', date: 'Feb 1', start: '2026-02-01', end: '2026-02-01', tasks: ['Channel and group setup', 'Community guidelines', 'Member recruitment', 'Content strategy', 'Engagement campaigns'], impact: 'Build direct communication. Create engaged community. Target 5k+ members.' },
        'discord': { title: 'Discord', date: 'Mar 1', start: '2026-03-01', end: '2026-03-01', tasks: ['Server setup and structure', 'Channel organization', 'Bot integration', 'Community events', 'Member onboarding'], impact: 'Deeper community engagement. Real-time discussions. Target 3k+ active members.' },
        'whatsapp': { title: 'WhatsApp', date: 'Apr 1', start: '2026-04-01', end: '2026-04-01', tasks: ['WhatsApp Business setup', 'Broadcast list creation', 'Content strategy', 'Automated responses', 'User segmentation'], impact: 'Reach users in preferred channel. Personalized communication. Support customer service.' },
        'instagram': { title: 'Instagram', date: 'May 1', start: '2026-05-01', end: '2026-05-01', tasks: ['Account setup and branding', 'Visual content strategy', 'Influencer collaborations', 'Reels and Stories', 'Community building'], impact: 'Reach younger demographic. Increase brand awareness. Create visual identity.' },
        'tiktok': { title: 'TikTok', date: 'May 1', start: '2026-05-01', end: '2026-05-01', tasks: ['Account setup and strategy', 'Trending content', 'Influencer partnerships', 'Educational short-form', 'Engagement campaigns'], impact: 'Reach Gen-Z audience. Create viral potential. Build brand personality.' },
        'semana-santa': { title: 'Semana Santa', date: 'Apr 2-3', start: '2026-04-02', end: '2026-04-03', tasks: ['Cultural content creation', 'Holiday promotions', 'Community engagement', 'Respectful messaging', 'Limited-time offers'], impact: 'Connect during cultural period. Show cultural awareness. Drive engagement.' },
        'dia-trabajo': { title: 'Día del Trabajo', date: 'May 1', start: '2026-05-01', end: '2026-05-01', tasks: ['Labor Day content', 'Financial independence messaging', 'Worker-focused promotions', 'Community appreciation', 'Educational content'], impact: 'Align with worker values. Position as empowerment tool. Drive professional sign-ups.' },
        'fifa-world-cup': { title: 'FIFA World Cup', date: 'Jun 11 - Jul 14', start: '2026-06-11', end: '2026-07-14', tasks: ['World Cup themed promotions', 'Community watch parties', 'Limited edition campaigns', 'Partnership opportunities', 'Social engagement'], impact: 'Leverage massive cultural moment. Reach broader audience. Target 50k+ impressions.' },
        'independencia': { title: 'Día de la Independencia', date: 'Jul 20', start: '2026-07-20', end: '2026-07-20', tasks: ['Patriotic content', 'Colombian pride messaging', 'Local success stories', 'Community celebrations', 'National positioning'], impact: 'Strengthen Colombian identity. Build national pride connection. Drive local acquisition.' },
        'batalla-boyaca': { title: 'Batalla de Boyacá', date: 'Aug 7', start: '2026-08-07', end: '2026-08-07', tasks: ['Historical commemoration', 'Educational campaigns', 'Community engagement', 'National pride', 'Special promotions'], impact: 'Connect with heritage. Show cultural awareness. Build authentic local brand.' }
    };

    let editMode = false;
    let paneEditMode = false;
    let hasUnsavedChanges = false;
    let currentItemId = null;
    let selectedElement = null;
    let activeStrategy = null;

    // Strategy Toggle Function
    function toggleStrategy(strategy) {
        const contentEl = document.getElementById('strategy-' + strategy);
        const buttons = document.querySelectorAll('.strategy-btn');
        const contents = document.querySelectorAll('.strategy-content');
        
        // If clicking the same button, close it
        if (activeStrategy === strategy) {
            contentEl.classList.remove('active');
            buttons.forEach(btn => btn.classList.remove('active'));
            activeStrategy = null;
            return;
        }
        
        // Close all others first
        contents.forEach(c => c.classList.remove('active'));
        buttons.forEach(btn => btn.classList.remove('active'));
        
        // Open the clicked one
        contentEl.classList.add('active');
        activeStrategy = strategy;
        
        // Mark the corresponding button as active
        const buttonIndex = { 'private': 0, 'community': 1, 'acquisition': 2 };
        buttons[buttonIndex[strategy]].classList.add('active');
    }

    // Init
    document.addEventListener('DOMContentLoaded', () => {
        loadSettings();
        attachClickHandlers();
        
        // Warn before leaving with unsaved changes
        window.addEventListener('beforeunload', (e) => {
            if (hasUnsavedChanges) {
                e.preventDefault();
                e.returnValue = 'You have unsaved changes. Are you sure you want to leave?';
            }
        });
    });

    function attachClickHandlers() {
        document.querySelectorAll('.bar, .diamond').forEach(el => {
            el.addEventListener('click', (e) => {
                if (!editMode) {
                    openDetail(el.dataset.id);
                } else {
                    selectElement(el);
                }
            });
        });
    }

    function selectElement(el) {
        if (selectedElement) selectedElement.classList.remove('selected');
        selectedElement = el;
        el.classList.add('selected');
        openDetail(el.dataset.id);
    }

    function openDetail(id) {
        const pane = document.getElementById('detailPane');
        
        // If clicking the same item that's already open, close the panel
        if (currentItemId === id && pane.classList.contains('active')) {
            pane.classList.remove('active');
            currentItemId = null;
            return;
        }
        
        // Otherwise open with new item data
        currentItemId = id;
        const data = campaignData[id] || { title: 'Unknown Item', date: 'TBD', tasks: ['No data available'], impact: 'No impact data available.' };
        
        document.getElementById('dTitle').textContent = data.title;
        document.getElementById('dDate').textContent = data.date;
        document.getElementById('dList').innerHTML = data.tasks.map(t => `<li>${t}</li>`).join('');
        document.getElementById('dImpact').textContent = data.impact;
        
        pane.classList.add('active');
    }

    // Edit Mode
    function toggleEditMode() {
        editMode = !editMode;
        const btn = document.getElementById('editBtn');
        
        if (editMode) {
            btn.textContent = 'Done Editing';
            btn.classList.add('edit-active');
            document.body.classList.add('edit-mode');
            enableDragAndResize();
        } else {
            btn.textContent = 'Edit';
            btn.classList.remove('edit-active');
            document.body.classList.remove('edit-mode');
            disableDragAndResize();
            if (selectedElement) {
                selectedElement.classList.remove('selected');
                selectedElement = null;
            }
        }
    }

    function enableDragAndResize() {
        document.querySelectorAll('.bar').forEach(bar => {
            bar.draggable = true;
            bar.addEventListener('dragstart', handleDragStart);
            bar.addEventListener('dragend', handleDragEnd);
            
            // Add left resize handle
            const leftHandle = document.createElement('div');
            leftHandle.className = 'resize-handle resize-left';
            leftHandle.addEventListener('mousedown', (e) => startResize(e, 'left'));
            bar.appendChild(leftHandle);
            
            // Add right resize handle
            const rightHandle = document.createElement('div');
            rightHandle.className = 'resize-handle resize-right';
            rightHandle.addEventListener('mousedown', (e) => startResize(e, 'right'));
            bar.appendChild(rightHandle);
        });
        
        document.querySelectorAll('.diamond').forEach(diamond => {
            diamond.draggable = true;
            diamond.addEventListener('dragstart', handleDragStart);
            diamond.addEventListener('dragend', handleDragEnd);
        });
        
        document.querySelectorAll('.swim-track').forEach(track => {
            track.addEventListener('dragover', handleDragOver);
            track.addEventListener('drop', handleDrop);
        });
    }

    function disableDragAndResize() {
        document.querySelectorAll('.bar, .diamond').forEach(el => {
            el.draggable = false;
            el.removeEventListener('dragstart', handleDragStart);
            el.removeEventListener('dragend', handleDragEnd);
        });
        document.querySelectorAll('.resize-handle').forEach(h => h.remove());
    }

    let draggedElement = null;
    function handleDragStart(e) {
        draggedElement = e.target.closest('.bar, .diamond');
        e.dataTransfer.effectAllowed = 'move';
    }
    function handleDragEnd(e) {
        draggedElement = null;
    }
    function handleDragOver(e) {
        e.preventDefault();
        e.dataTransfer.dropEffect = 'move';
    }
    function handleDrop(e) {
        e.preventDefault();
        if (!draggedElement) return;
        
        const track = e.target.closest('.swim-track');
        const rect = track.getBoundingClientRect();
        const x = e.clientX - rect.left;
        let percent = (x / rect.width) * 100;
        
        // Snap to day intervals (~0.37% per day)
        percent = snapToDay(percent);
        
        draggedElement.style.left = Math.max(0, Math.min(95, percent)) + '%';
        updateItemDate(draggedElement.dataset.id, percent);
        markUnsaved();
    }

    // Day-based snapping constants
    // 9 months (Dec-Aug) = 100%, so ~11.11% per month, ~0.37% per day
    const MONTH_PERCENT = 11.11;
    const DAY_PERCENT = MONTH_PERCENT / 30; // ~0.37%
    const MONTH_NAMES = ['Dec', 'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug'];

    // Parse date string to calendar percentages
    function parseDateToPercent(dateStr) {
        // Handle formats like "Jan 26 - Feb 8", "Jan 1 - Jan 31", "May 1", "Jan 15-16"
        const parts = dateStr.split(' - ');
        let startStr = parts[0].trim();
        let endStr = parts.length > 1 ? parts[1].trim() : startStr;
        
        // Handle "Jan 15-16" format (hyphen without spaces)
        if (parts.length === 1 && startStr.includes('-')) {
            const match = startStr.match(/(\w+)\s+(\d+)-(\d+)/);
            if (match) {
                startStr = match[1] + ' ' + match[2];
                endStr = match[1] + ' ' + match[3];
            }
        }
        
        // Parse start date
        const startParts = startStr.split(' ');
        const startMonth = startParts[0];
        const startDay = parseInt(startParts[1]) || 1;
        const startMonthIndex = MONTH_NAMES.indexOf(startMonth);
        
        // Parse end date (might just be a day number if same month)
        let endMonth, endDay;
        const endParts = endStr.split(' ');
        if (endParts.length === 1 && !isNaN(parseInt(endParts[0]))) {
            // Just a day number, same month as start
            endMonth = startMonth;
            endDay = parseInt(endParts[0]);
        } else {
            endMonth = endParts[0];
            endDay = parseInt(endParts[1]) || 1;
        }
        const endMonthIndex = MONTH_NAMES.indexOf(endMonth);
        
        if (startMonthIndex === -1 || endMonthIndex === -1) {
            return null; // Invalid date format
        }
        
        // Calculate percentages
        const left = (startMonthIndex * MONTH_PERCENT) + ((startDay - 1) / 30 * MONTH_PERCENT);
        const endPercent = (endMonthIndex * MONTH_PERCENT) + ((endDay - 1) / 30 * MONTH_PERCENT);
        const width = Math.max(endPercent - left + DAY_PERCENT, DAY_PERCENT * 2); // At least 2 days
        
        return { left: snapToDay(left), width: snapToDay(width) };
    }

    // Update calendar bar from date change
    function updateCalendarFromDate(id, dateStr) {
        const bar = document.querySelector(`[data-id="${id}"]`);
        if (!bar || !bar.classList.contains('bar')) return; // Only update bars, not diamonds
        
        const result = parseDateToPercent(dateStr);
        if (result) {
            bar.style.left = result.left + '%';
            bar.style.width = result.width + '%';
        }
    }

    function snapToDay(percent) {
        // Snap to nearest day interval
        return Math.round(percent / DAY_PERCENT) * DAY_PERCENT;
    }

    let resizing = false;
    let resizeElement = null;
    let resizeDirection = 'right';
    let resizeStartX = 0;
    let resizeStartLeft = 0;
    let resizeStartWidth = 0;
    let resizeTrackRect = null;
    let rafId = null;

    function startResize(e, direction) {
        e.stopPropagation();
        e.preventDefault();
        
        resizing = true;
        resizeDirection = direction;
        resizeElement = e.target.parentElement;
        resizeElement.classList.add('resizing');
        
        const track = resizeElement.parentElement;
        resizeTrackRect = track.getBoundingClientRect();
        resizeStartX = e.clientX;
        resizeStartLeft = parseFloat(resizeElement.style.left) || 0;
        resizeStartWidth = parseFloat(resizeElement.style.width) || 5;
        
        document.addEventListener('mousemove', doResize);
        document.addEventListener('mouseup', stopResize);
    }

    function doResize(e) {
        if (!resizing || !resizeElement) return;
        
        // Cancel previous animation frame for smooth updates
        if (rafId) cancelAnimationFrame(rafId);
        
        rafId = requestAnimationFrame(() => {
            const deltaX = e.clientX - resizeStartX;
            const deltaPercent = (deltaX / resizeTrackRect.width) * 100;
            
            if (resizeDirection === 'right') {
                // Resize from right side - only width changes
                let newWidth = resizeStartWidth + deltaPercent;
                newWidth = snapToDay(newWidth);
                
                if (newWidth >= DAY_PERCENT * 2) { // Minimum 2 days
                    resizeElement.style.width = newWidth + '%';
                }
            } else {
                // Resize from left side - both left and width change
                let newLeft = resizeStartLeft + deltaPercent;
                let newWidth = resizeStartWidth - deltaPercent;
                
                newLeft = snapToDay(newLeft);
                newWidth = snapToDay(newWidth);
                
                if (newWidth >= DAY_PERCENT * 2 && newLeft >= 0) { // Minimum 2 days, stay in bounds
                    resizeElement.style.left = newLeft + '%';
                    resizeElement.style.width = newWidth + '%';
                }
            }
            
            markUnsaved();
        });
    }

    function stopResize() {
        if (rafId) cancelAnimationFrame(rafId);
        
        if (resizeElement) {
            resizeElement.classList.remove('resizing');
            
            // Update the date after resize
            const left = parseFloat(resizeElement.style.left);
            const width = parseFloat(resizeElement.style.width);
            updateItemDateRange(resizeElement.dataset.id, left, width);
        }
        
        resizing = false;
        resizeElement = null;
        resizeTrackRect = null;
        document.removeEventListener('mousemove', doResize);
        document.removeEventListener('mouseup', stopResize);
    }

    function updateItemDateRange(id, leftPercent, widthPercent) {
        // Convert percent to date range
        const months = ['Dec 2025', 'Jan 2026', 'Feb 2026', 'Mar 2026', 'Apr 2026', 'May 2026', 'Jun 2026', 'Jul 2026', 'Aug 2026'];
        
        const startMonthIndex = Math.floor(leftPercent / MONTH_PERCENT);
        const startDay = Math.floor(((leftPercent % MONTH_PERCENT) / MONTH_PERCENT) * 30) + 1;
        
        const endPercent = leftPercent + widthPercent;
        const endMonthIndex = Math.floor(endPercent / MONTH_PERCENT);
        const endDay = Math.floor(((endPercent % MONTH_PERCENT) / MONTH_PERCENT) * 30) + 1;
        
        let dateStr;
        if (startMonthIndex === endMonthIndex) {
            dateStr = `${months[Math.min(startMonthIndex, 8)].split(' ')[0]} ${startDay} - ${endDay}`;
        } else {
            dateStr = `${months[Math.min(startMonthIndex, 8)].split(' ')[0]} ${startDay} - ${months[Math.min(endMonthIndex, 8)].split(' ')[0]} ${endDay}`;
        }
        
        if (campaignData[id]) {
            campaignData[id].date = dateStr;
            if (currentItemId === id) {
                document.getElementById('dDate').textContent = dateStr;
            }
        }
    }

    function updateItemDate(id, leftPercent) {
        // Convert percent to date (Dec 2025 = 0%, Aug 2026 = 100%)
        const months = ['Dec 2025', 'Jan 2026', 'Feb 2026', 'Mar 2026', 'Apr 2026', 'May 2026', 'Jun 2026', 'Jul 2026', 'Aug 2026'];
        const monthIndex = Math.floor(leftPercent / 11.11);
        const dayInMonth = Math.floor(((leftPercent % 11.11) / 11.11) * 30) + 1;
        const newDate = months[Math.min(monthIndex, 8)] + ' ' + dayInMonth;
        
        if (campaignData[id]) {
            campaignData[id].date = newDate;
            if (currentItemId === id) {
                document.getElementById('dDate').textContent = newDate;
            }
        }
    }

    // Pane Edit Mode
    function togglePaneEdit() {
        paneEditMode = !paneEditMode;
        const btn = document.getElementById('paneEditBtn');
        const title = document.getElementById('dTitle');
        const date = document.getElementById('dDate');
        const list = document.getElementById('dList');
        const impact = document.getElementById('dImpact');
        
        if (paneEditMode) {
            btn.textContent = '✓ Save';
            btn.classList.add('edit-active');
            [title, date, list, impact].forEach(el => {
                el.contentEditable = true;
                el.classList.add('editable-active');
            });
        } else {
            btn.textContent = '✎ Edit';
            btn.classList.remove('edit-active');
            [title, date, list, impact].forEach(el => {
                el.contentEditable = false;
                el.classList.remove('editable-active');
            });
            
            // Save changes to data
            if (currentItemId && campaignData[currentItemId]) {
                campaignData[currentItemId].title = title.textContent;
                campaignData[currentItemId].date = date.textContent;
                campaignData[currentItemId].tasks = Array.from(list.querySelectorAll('li')).map(li => li.textContent);
                campaignData[currentItemId].impact = impact.textContent;
                
                // Update calendar item text
                const calItem = document.querySelector(`[data-id="${currentItemId}"]`);
                if (calItem && calItem.classList.contains('bar')) {
                    calItem.childNodes[0].textContent = title.textContent;
                }
                
                // Update calendar bar position from date change
                updateCalendarFromDate(currentItemId, date.textContent);
            }
            markUnsaved();
        }
    }

    // Add New Item
    function addNewItem() {
        const type = document.getElementById('newItemType').value;
        const title = document.getElementById('newItemTitle').value;
        const category = document.getElementById('newItemCategory').value;
        const startDate = document.getElementById('newItemStart').value;
        const endDate = document.getElementById('newItemEnd').value;
        const deliverables = document.getElementById('newItemDeliverables').value.split('\n').filter(d => d.trim());
        const impact = document.getElementById('newItemImpact').value;
        
        if (!title || !startDate) {
            alert('Please fill in at least a title and start date.');
            return;
        }
        
        const id = 'custom-' + Date.now();
        const leftPercent = dateToPercent(startDate);
        const widthPercent = type === 'bar' && endDate ? dateToPercent(endDate) - leftPercent : 0;
        
        const track = document.getElementById('track-' + category);
        const element = document.createElement('div');
        
        if (type === 'bar') {
            element.className = `bar bar-${category}`;
            element.style.left = leftPercent + '%';
            element.style.width = Math.max(widthPercent, 3) + '%';
            element.textContent = title;
        } else {
            element.className = `diamond diamond-${getDiamondColor(category)}`;
            element.style.left = leftPercent + '%';
            element.innerHTML = `<span class="d-label">${title} · ${formatDate(startDate)}</span>`;
        }
        
        element.dataset.id = id;
        element.addEventListener('click', () => openDetail(id));
        track.appendChild(element);
        
        // Add to data
        campaignData[id] = {
            title: title,
            date: endDate ? formatDate(startDate) + ' - ' + formatDate(endDate) : formatDate(startDate),
            start: startDate,
            end: endDate || startDate,
            tasks: deliverables.length ? deliverables : ['New item'],
            impact: impact || 'Define business impact...'
        };
        
        closeModal('addItemModal');
        markUnsaved();
        showToast('Item added');
        
        // Clear form
        document.getElementById('newItemTitle').value = '';
        document.getElementById('newItemStart').value = '';
        document.getElementById('newItemEnd').value = '';
        document.getElementById('newItemDeliverables').value = '';
        document.getElementById('newItemImpact').value = '';
    }

    function dateToPercent(dateStr) {
        const date = new Date(dateStr);
        const start = new Date('2025-12-01');
        const end = new Date('2026-08-31');
        const total = end - start;
        const elapsed = date - start;
        return Math.max(0, Math.min(100, (elapsed / total) * 100));
    }

    function formatDate(dateStr) {
        const date = new Date(dateStr);
        const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
        return months[date.getMonth()] + ' ' + date.getDate();
    }

    function getDiamondColor(category) {
        const colors = { product: 'yellow', social: 'cyan', events: 'orange', uni: 'green', influencer: 'yellow', web: 'cyan', culture: 'red' };
        return colors[category] || 'orange';
    }

    // Unsaved Changes
    function markUnsaved() {
        hasUnsavedChanges = true;
        document.getElementById('unsavedIndicator').classList.add('show');
    }

    function markSaved() {
        hasUnsavedChanges = false;
        document.getElementById('unsavedIndicator').classList.remove('show');
    }

    // Modal Helpers
    function openModal(id) { document.getElementById(id).style.display = 'flex'; }
    function closeModal(id) { document.getElementById(id).style.display = 'none'; }

    // Toggle end date visibility
    document.getElementById('newItemType').addEventListener('change', (e) => {
        document.getElementById('endDateGroup').style.display = e.target.value === 'bar' ? 'block' : 'none';
    });

    // Toast
    function showToast(msg, type = '') {
        const toast = document.getElementById('toast');
        toast.textContent = msg;
        toast.className = 'toast show' + (type ? ' ' + type : '');
        setTimeout(() => toast.classList.remove('show'), 3000);
    }

    // Settings
    function loadSettings() {
        const config = JSON.parse(localStorage.getItem('solvida_gh_mkt_config') || '{}');
        document.getElementById('ghUsername').value = config.user || '';
        document.getElementById('ghRepo').value = config.repo || '';
        document.getElementById('ghToken').value = config.token || '';
        document.getElementById('ghPath').value = config.path || 'marketing.html';
    }

    function saveSettings() {
        const config = {
            user: document.getElementById('ghUsername').value,
            repo: document.getElementById('ghRepo').value,
            token: document.getElementById('ghToken').value,
            path: document.getElementById('ghPath').value
        };
        localStorage.setItem('solvida_gh_mkt_config', JSON.stringify(config));
        closeModal('settingsModal');
        showToast('Settings saved');
    }

    async function publishToGitHub() {
        if (editMode) toggleEditMode();
        if (paneEditMode) togglePaneEdit();
        
        const config = JSON.parse(localStorage.getItem('solvida_gh_mkt_config') || '{}');
        if (!config.token) { 
            alert('Please configure GitHub settings first.'); 
            openModal('settingsModal'); 
            return; 
        }
        
        const btn = document.getElementById('publishBtn');
        btn.textContent = 'Publishing...';
        btn.disabled = true;
        
        try {
            const getRes = await fetch(`https://api.github.com/repos/${config.user}/${config.repo}/contents/${config.path}`, {
                headers: { 'Authorization': `Bearer ${config.token}` }
            });
            const getData = await getRes.json();
            
            const htmlContent = "<!DOCTYPE html>\n" + document.documentElement.outerHTML;
            const contentEncoded = btoa(unescape(encodeURIComponent(htmlContent)));
            
            const putRes = await fetch(`https://api.github.com/repos/${config.user}/${config.repo}/contents/${config.path}`, {
                method: 'PUT',
                headers: { 'Authorization': `Bearer ${config.token}`, 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    message: 'Update Marketing Calendar - ' + new Date().toLocaleString(),
                    content: contentEncoded,
                    sha: getData.sha
                })
            });
            
            if (putRes.ok) {
                markSaved();
                showToast('Published successfully!');
            } else {
                throw new Error('Publish failed');
            }
        } catch(e) {
            showToast('Error: ' + e.message, 'warning');
        }
        
        btn.textContent = 'Publish';
        btn.disabled = false;
    }
</script>


</body></html>